!function(){"use strict";var u=!0,n="_MeiTuanALogObject",d=1,r="dianping_nova",h="waimai",m="group",c="demo",g="4.13.12",_="lxcuid",y="uuid",b="msid",w="cityid",A="utm",x="uid",S="userid",k="dpid",O="appnm",s="union_id",l="web_env",q="wxmp_env",v="pd_data",j=/^(([^? \r\n]*)\?)?([^?# \r\n]+)(#\S+)?$/,D=setTimeout,f=clearTimeout,p=1,a=2,I=3,E=4,e=5,i=6,o=20,C=7;function T(t){var n=t;return t&&t.code&&(n=t.code),n===p?"E_TIME_OUT":n===a?"E_NO_JSBRIDGE":n===I?"E_KNB_FAIL":n===E?"E_KNB_CB_FAIL":n===e?"E_KNB_NOT_EXIST":n===o?"ERR_PARAMS":n===i?"E_KNB_METHOD_NOT_SUPPORT":"unknown error: "+n}var M=200,N=100,F=500,R=600,P=-1,L="PV",B="PD",V="MC",U="SC",J="MV",Q="MVL",W="ME",K="BO",X="BP",$="event_type",z="val_act",H="val_cid",Z="index",G="element_id",Y="pageView",tt="systemCheck",nt="moduleClick",et="order",rt="order_id",it=1e3,ot=2,at=0,ut=6,ct=-1,st=0,ft=1,dt=10080,lt=1576800,vt=30,pt="_lx_utm",ht="_lxsdk",mt="_lxsdk_cuid",gt="_lxsdk_dpid",_t="_lxsdk_s",yt="latlng",bt="_lxsdk_rr",wt="_lxsdk_rc",xt="msid",St="ms",kt="category",Ot="c",qt="login_type",jt="lt",It="locate_city_id",At="lci",Dt="sdk_ver",Et="sv",Ct="lxcuid",Tt="lxid",Mt="val_lab",Nt="val_bid",Ft="val_val",Rt="sf",Pt="__$lx_beacon_",Lt={category:u,union_id:u,lxcuid:u,app:u,sdk_ver:u,appnm:u,ch:u,lch:u,ct:u,did:u,dm:u,ua:u,msid:u,uuid:u,lat:u,log:u,net:u,os:u,idfa:u,pushid:u,subcid:u,mac:u,imsi:u,uid:u,logintype:u,cityid:u,apn:u,mno:u,pushSetting:u,wifi:u,bht:u,ip:u,vendorid:u,geohash:u,dtk:u,sns:u,android_id:u,version_code:u,brand:u,utm:u},Bt="post",Vt="__lxvalidation",Ut="report.meituan.com",Jt="hreport.meituan.com",Qt=-3,Wt=function(){};function t(){return window}function Kt(){return t().XMLHttpRequest}var Xt,$t,zt=(Xt=Kt(),$t=Xt&&"withCredentials"in new Xt,function(){return $t}),Ht=/__lxvalidation=([\w.]+)/i,Zt=10,Gt=!1,Yt=void 0,tn=void 0,nn={};function en(t){var n,e=0===Se().indexOf("http:")?"http:":"https:",r=e+"//"+t+"/",i=Fn.search.match(Ht)||[],o=function(){var t=se.get(Vt);if(t){var n=t.split("|");return{mis:n[0],env:n[1]||""}}return t||{}}();return(n=i&&i[1]||o.mis||"")&&(se.top(Vt,n+"|",Zt),r=e+"//"+t+"/?mis="+n,rn.debug=n),r}var rn={inWXMP:!1,pageValLab:null,pageEnv:null,use_post:!1,cid:null,appnm:null,quit:null,useQR:!1,onWebviewAppearAutoPV:!0,positiveLab:!0,nativeSDKVer:null,cacheRetryMinutes:5,debug:!1},on=[];rn.on=function(t,n){on.push({name:t,fn:n})};var an={MVL:!(rn.emit=function(r,i,o,a,u){oe.each(on,function(t){var n=t.name,e=t.fn;n===r&&e(i,o,a,u)})}),QR:!1,getReqId:!1};function un(t){return!!an[t]}var cn={cv:"prod",web:1};function sn(t,n){t&&!n?delete cn[t]:cn[t]=n}function fn(t){return t?cn[t]:cn}function dn(t,n){ne.isStr(t)&&(nn[t]=n)}function ln(t){Gt=t}function vn(){return Gt===d}function pn(t){return Yt&&!t||(Yt=en(Ut)),Yt}var hn=["wreport.meituan.net","wreport1.meituan.net","wreport2.meituan.net"],mn=0;function gn(t){if(!tn||t){var n=hn[parseInt(mn++%18/6)];tn=en(n)}return tn}var _n=void 0;function yn(){if(Vn!==_n)return _n;var t=Rn.getElementsByTagName("meta");return _n="off"===he(t,"lx:native-report")}var bn=at;function wn(){return bn}function xn(t){yn()||(bn=t)}var Sn=!1;function kn(t){Sn=!!t}var On=5e3,qn=50,jn={MVL:{}},In=void 0,An=void 0;function Dn(t,n,e,r){r=r||{};var i=n.category,o=e.req_id,a=e.val_cid,u=e.val_bid,c=r.tag;if(jn[t]&&ne.isStr(t)&&ne.isStr(i)&&ne.isStr(o)&&ne.isStr(a)&&ne.isStr(u)){var s=i+"_"+o+"_"+a+"_"+u,f=jn[t];ne.isObj(f[s])||(f[s]={env:ne.extend(!0,{},n),evs:e,lab:[]}),ne.isObj(c)&&(f[s].evs.tag=c);var d=ne.extend(!0,e.val_lab,{_seq:e.seq,_tm:e.tm});f[s].lab.push(d),function(){var t=0;for(var n in jn){var e=jn[n];for(var r in e){var i=e[r].lab;t+=i.length||0}}qn<t&&Tn()}()}}function En(t,n){var e=(n||{}).withUnload,r=jn[t];if(ne.isObj(r)){var i=[];for(var o in r){var a=r[o],u=!1;if(a.lab&&a.lab.length){var c=a.env,s=a.evs,f={mv_list:a.lab,custom:{_withUnload:!!e}};s.val_lab=f;for(var d=0,l=i.length;d<l;d++){var v=i[d];if(!Cn(v,c)){v.evs.push(s),u=!0;break}}u||(c.evs=[s],i.push(c))}}i.length&&An.send(i),jn[t]={}}}function Cn(t,n){var e=0,r=0;for(var i in t)t.hasOwnProperty(i)&&e++;for(var o in n)n.hasOwnProperty(o)&&r++;var a=r<e?t:n,u=e<=r?t:n;for(var c in a){if(!(-1<"evs|".indexOf(c+"|")))if(ne.isObj(a[c])&&ne.isObj(u[c])){if(Cn(a[c],u[c]))return!0}else if(a[c]!==u[c])return!0}return!1}function Tn(t){var n=(t||{}).withUnload;for(var e in jn)En(e,{withUnload:n})}D(function t(){clearTimeout(In);try{Tn()}catch(t){}finally{wn()===at?In=D(t,On):clearTimeout(In)}},100);var Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn=t(),Fn=location,Rn=document,Pn=Rn.domain,Ln=navigator,Bn=Ln.userAgent.toString(),Vn=void 0,Un=Array.prototype,Jn=Object.prototype,Qn=decodeURIComponent,Wn=encodeURIComponent,Kn=Gn(),Xn=Jn.toString,$n=Jn.hasOwnProperty;function zn(){}function Hn(t){return void 0===t?"undefined":Mn(t)}function Zn(t,n){return Hn(t)===n}function Gn(){return+new Date}function Yn(){return Math.random()}function te(t){return Zn(t,"number")}var ne={};function ee(t,e,r){var i=void 0,o=!0===t;return o||(r=e,e=t),e&&ne.isObj(e)||(e={}),r&&ne.isObj(r)||(r={}),oe.each(r,function(t,n){o&&ne.isObj(r[n])?(i=e[n],e[n]=ne.isObj(i)?i:{},ee(o,e[n],r[n])):e[n]=r[n]}),e}ne.trim=function(t){return t.replace(/^[\s\uFEFF\xA0\u3000]+|[\s\uFEFF\xA0\u3000]+$/g,"")},ne.now=Gn,ne.rnd=Yn,ne.hasOwn=function(t,n){return $n.call(t,n)},ne.extend=ee;var re=function(t){return t&&"[object Object]"===Xn.call(t)};ne.isObj=re;var ie=function(t){return Zn(t,"string")};ne.isStr=ie,ne.isFunc=function(t){return Zn(t,"function")},ne.attr=function(t,n){return t.getAttribute(n)},ne.parseQuery=function(t){var i={};if(t){var n=t.replace(j,function(t,n,e,r){return r||""}).split("&");return oe.each(n,function(t){var n=t.split("="),e=n[0],r=n.slice(1).join("")||"";e&&!$n.call(i,e)&&(i[e]=Qn(r))}),i}},ne.stringifyQuery=function(t){var r=[];return ne.isObj(t)&&oe.each(t,function(t,n){var e;ne.isFunc(t)||(Vn!==t&&((e=t)||!Zn(e,"object"))||(t=t||""),r.push(Wn(n)+"="+Wn(t)))}),r.join("&")},ne.genReqId=function(){return""+1e3*Gn()+parseInt(1e3*Yn())},ne.run=function(t,n){ae(t)?oe.each(t,n):n(t)},ne.on=function(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent&&t.attachEvent("on"+n,e)},ne.off=function(t,n,e){t.removeEventListener?t.removeEventListener(n,e,!1):t.detachEvent&&t.detachEvent("on"+n,e)};var oe={isArray:function(t){return"[object Array]"===Xn.call(t)}},ae=function(t){if(!t)return!1;var n=t.length;return!!oe.isArray(t)||!!(t&&te(n)&&0<=n)&&(!ne.isObj(t)||(!(1<n)||n-1 in t))};oe.isArrayLike=ae,oe.find=function(e,r,i){var o=void 0;return ae(e)&&oe.each(e,function(t,n){if(!0===r.call(i,t,n,e))return o=t,!1}),o},oe.filter=function(e,r,i){var o=[];return ae(e)&&oe.each(e,function(t,n){r.call(i,t,n,e)&&o.push(t)}),o},oe.toArray=function(t,n,e){var r=[];return ae(t)&&oe.each(t,function(t){r.push(n?n.call(e,t):t)},e),r};var ue=function(t,n,e){if(t){var r=void 0,i=void 0,o=void 0;if(ae(t))for(i=0,o=t.length;i<o&&!1!==n.call(e,t[i],i,t);i++);else for(r in t)if(ne.hasOwn(t,r)&&!1===n.call(e,t[r],r,t))break}};oe.each=ue;var ce=function(t,n,e){if(t){for(var r=[],i=0,o=t.length;i<o;i++){var a=n.call(e,t[i],i,t);r.push(a)}return r}};oe.slice=function(t,n,e){return Un.slice.call(oe.toArray(t),n,e)},oe.reduce=function(t,n){if(ae(t)&&ne.isFunc(n)){var e=t,r=e.length>>>0,i=0,o=void 0,a=arguments;if(3===a.length)o=a[2];else{for(;i<r&&!(i in e);)i++;if(r<=i)return;o=e[i++]}for(;i<r;)i in e&&(o=n(o,e[i],i,e)),i++;return o}};var se={};function fe(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=void 0,r=void 0,i=void 0,o=void 0,a=void 0,u=0,c=0,s="",f=[];if(!t)return t;for(t=de(t);e=(a=t.charCodeAt(u++)<<16|t.charCodeAt(u++)<<8|t.charCodeAt(u++))>>18&63,r=a>>12&63,i=a>>6&63,o=63&a,f[c++]=n.charAt(e)+n.charAt(r)+n.charAt(i)+n.charAt(o),u<t.length;);switch(s=f.join(""),t.length%3){case 1:s=s.slice(0,-2)+"==";break;case 2:s=s.slice(0,-1)+"="}return s}function de(t){var n,e="",r=void 0,i=void 0,o=void 0;for(r=i=0,n=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<n;o++){var a=t.charCodeAt(o),u=null;a<128?i++:u=127<a&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==u&&(r<i&&(e+=t.substring(r,i)),e+=u,r=i=o+1)}return r<i&&(e+=t.substring(r,t.length)),e}se.del=function(t,n){var e=t+"=;path=/;domain="+n,r=new Date;return r.setFullYear(1970),e+=";expires="+r.toUTCString(),Rn.cookie=e,!0},se.get=function(t){var n=Rn.cookie.match(new RegExp("(?:^|;)\\s*"+t+"=([^;]+)"));return Qn(n?n[1]:"")},se.set=function(t,n,e,r){r=r||Rn.domain;var i=void 0,o=void 0,a=void 0,u=t+"="+Wn(n)+";path=/;domain="+r;Vn===e||isNaN(e)||(i=new Date,o=60*parseInt(e,10)*1e3,a=i.getTime()+o,i.setTime(a),u+=";expires="+i.toUTCString());try{return Rn.cookie=u,!0}catch(t){return!1}},se.top=function(t,n,e){var r=Rn.domain,i=r.split("."),o=i.length,a=o-1,u=void 0,c=!1;for(n=""+n;!c&&0<=a&&(r=i.slice(a,o).join("."),se.set(t,n,e,r),u=se.get(t),Vn!==u&&(c=u===n),a--,!c););},se.del=function(t){return se.top(t,"",-100)};var le=window.btoa,ve=fe;try{ne.isFunc(le)&&le(de(Bn))===fe(Bn)?(ve=function(t){return le(de(t))},sn("btoa","0")):sn("btoa","1")}catch(t){}var pe=ve;function he(t,n){var e=void 0,r=oe.find(t,function(t){return ne.attr(t,"name")===n});return r&&(e=ne.attr(r,"content")),e}function me(){var t=Nn[n];return Nn[t]}var ge,_e=(ge=void 0,{update:function(t){ge=t},get:function(){return ge}});function ye(t){var n=t||Gn(),e=me();_e.update(n),Kn=n,e&&(e.l=n)}function be(){var t={duration:function(){var t=void 0,n=_e.get(),e=Gn();if(n)t=n,_e.update(e);else{var r=me(),i=Nn.performance&&Nn.performance.timing;(t=i&&i.requestStart)||(t=r?r.l:Kn),_e.update(e)}return e-t}()},n=void 0,e=rn.quit;return ne.isFunc(e)&&(n=e()||{}),t=ne.extend(t,n||{})}function we(t,n){n[rt]}var xe=2032;function Se(){return Fn.protocol}/trident/i.test(Bn)||/msie/i.test(Bn)||!/mozilla.+webkit.+chrome.+/i.test(Bn)||(xe=6e3);var ke=0;function Oe(t,n){var e=/^((\d+\.)+\d+).*$/;if("string"!==Hn(t)||"string"!==Hn(n))return NaN;if(!e.test(t)||!e.test(n))return NaN;for(var r=t.replace(e,"$1").split("."),i=n.replace(e,"$1").split("."),o=0,a=Math.max(r.length,i.length);o<a;o++){if(!r[o]||!i[o])(!r[o]&&r||!i[o]&&i).push("0");var u=r[o].toString().length,c=i[o].toString().length;if(u!==c){var s=c<u?i:r;s[o]=Array(Math.abs(u-c)+1).join("0")+s[o].toString()}}var f=parseInt(r.join("")),d=parseInt(i.join(""));return f==d?0:d<f?1:-1}function qe(e,r,i,o,a,u,c){return function(t){if(!e){e=!0;try{if(r&&new Date-i<50)return;if(o)return;if(o=!1,!c()){var n=be();a("pageDisappear",n,{isAuto:6,shouldStore:!0})}Tn({withUnload:!0})}catch(t){}u&&u(t)}}}var je=4,Ie="",Ae=function(t){je=t},De=function(){return Ie&&3===je},Ee=function(t){Ie=t},Ce=function(){return Ie},Te=void 0;try{Te=Nn.sessionStorage}catch(t){Te=null}var Me=void 0;Me=ne.isFunc(Nn.atob)?Nn.atob:function(t){return t};var Ne={},Fe=function(t,n){if(Ne[t])try{Ne[t](n),D(function(){delete Ne[t]},0)}catch(t){}},Re=Bn,Pe=[{n:c,r:/lingxi\/demo\/\d+/i,v:Re},{n:r,r:/dp\/com\.dianping\.[\w.]+\/([\d.]+)/i,v:Re},{n:h,r:/\bmeituanwaimai-c\/\d+\./i,v:Re},{n:"moviepro",r:/\bmoviepro/i,v:Re},{n:"movie",r:/\bmaoyan\b/i,v:Re},{n:m,r:/\bmeituan \d+|meituangroup\/\d+\./i,v:Re}],Le=/android/i.test(Re),Be="",Ve=Le,Ue=!1,Je=!1,Qe="www",We=!1;if(/\bandroid|mobile\b|\bhtc\b/i.test(Re)){Qe="i",Ve=!0,oe.each(Pe,function(t){if(t.r.test(t.v))return Be=t.n,!1}),/\btitans(no){0,1}x\b/i.test(Re)&&(Ue=!0);var Ke=/iphone/i.test(Re),Xe=/ipad/i.test(Re);(Ke||Xe)&&(Je=!0),Be&&(Ke?Qe="iphone":/android/i.test(Re)?Qe="android":Xe&&(Qe="ipad"))}else{var $e=Re.match(/(msie) (\d+)|Trident\/(d+)/i);$e&&(We=!0,$e&&parseInt($e[2],10))}var ze=Nn.screen.width+"*"+Nn.screen.height,He=Ue||/ knb\/\d+/i.test(Bn),Ze=function(){return Ve&&He},Ge=Bn.replace(/^.*TitansX\/([\d.]+)\s.*$/i,"$1"),Ye=!(!Ve||!/\sMicroMessenger/.test(Re)),tr=A+"_source",nr=A+"_medium",er=A+"_term",rr=A+"_campaign",ir=A+"_content",or=void 0,ar=!1;function ur(t){if(!t)return Vn;var e=Vn,r=/^utm_(source|medium|term|content|campaign)$/;return oe.each(t,function(t,n){r.test(n)&&(!e&&(e={}),e[n]=t)}),e}function cr(t){if(t){or=t;var n=ne.stringifyQuery(t);return se.del(pt,Pn),se.top(pt,n,dt,Pn),!0}return!1}function sr(t,n){var o,e,r,i,a;return(!or&&!ar||t)&&(t=t||Fn.href,n=n||Rn.referrer,a=t,(or=ur(ne.parseQuery(a))||function(t){var n=Vn,e=t.match(/^[\w-]+:\/\/([^/]+)(?:\/([^?]+)?)?/),a=e&&e[1];if(a){var u=ne.parseQuery(t),r="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q m.baidu:word wap.baidu:word baidu:word Baidu:bs www.soso:w wap.soso:key www.sogou:query wap.sogou:keyword m.so:q m.sogou:keyword so.com:pq youdao:q sm.cn:q sm.cn:keyword haosou:q".split(" "),c="",s="";oe.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1],i=u[r],o=-1<e.indexOf(".")?e:"."+e+".";if(-1<a.indexOf(o.toLowerCase())&&(s=e,c=i))return!1}),s&&((n={})[tr]=s,n[nr]="organic",c&&(n[er]=c))}return n}(n))?cr(or):(i=se.get(pt),or=j.test(i)?ur(ne.isStr(i)?ne.parseQuery(i):null):or),or||(o=void 0,e=se.get("__utmz"),(r=e&&e.match(/(utmc(tr|sr|cn|md|ct))=([^|()]+)/g))&&oe.each(r,function(t){var n=t.split("="),e=n[0],r=void 0,i=n[1]||"";"utmcsr"===e?r=tr:"utmccn"===e?r=rr:"utmcmd"===e?r=nr:"utmcct"===e?r=ir:"utmctr"===e&&(r=er),r&&((o=o||{})[r]=i)}),cr(or=o)),ar=u),or}var fr,dr,lr,vr,pr=Nn.JSON;pr||(pr={parse:function(t){return new Function("return ("+t+")")()},stringify:(fr=oe.isArray,dr={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},lr=function(t){return dr[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},vr=/[\\"\u0000-\u001F\u2028\u2029]/g,function t(n){if(null==n)return"null";if(Zn(n,"number"))return isFinite(n)?n.toString():"null";if(Zn(n,"boolean"))return n.toString();if(Zn(n,"object")){if("function"===Hn(n.toJSON))return t(n.toJSON());if(fr(n)){for(var e="[",r=0;r<n.length;r++)e+=(r?", ":"")+t(n[r]);return e+"]"}if(ne.isObj(n)){var i=[];for(var o in n)n.hasOwnProperty(o)&&i.push(t(o)+": "+t(n[o]));return"{"+i.join(", ")+"}"}}return'"'+n.toString().replace(vr,lr)+'"'})});var hr=pr,mr="__lxsdk_",gr=void 0;try{gr=Nn.localStorage}catch(t){gr=null}function _r(t){return mr+t}function yr(){return{length:0,_data:{},setItem:function(t,n){return this.length++,this._data[t]=String(n)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:Vn},removeItem:function(t){return this.length--,delete this._data[t]},clear:function(){return this.length=0,this._data={}},key:function(t){var n=[],e=this._data;return oe.each(e,function(t){ne.hasOwn(e,t)&&n.push(t)}),n[t]}}}var br={get:function(t){t=_r(t);var n=gr.getItem(t);return n=Vn!==n?hr.parse(n):n},set:function(t,n){return br.del(t),gr.setItem(_r(t),hr.stringify(n))},keys:function(){for(var t=[],n=void 0,e=0;e<gr.length;e++)0===(n=gr.key(e)).indexOf(mr)&&t.push(n.replace(mr,""));return t},del:function(t){try{return gr.removeItem(_r(t))}catch(t){}},clear:function(){for(var t=this.keys(),n=0;n<t.length;n++)this.del(t[n])}};if(gr){if(gr){var wr="___lxtest";br.nt=!0;try{br.set(wr,1),1!==br.get(wr)?br.clear():br.del(wr)}catch(t){try{br.clear(),gr.setItem(wr,1),gr.removeItem(wr)}catch(t){gr=yr(),br.nt=!1}}}}else gr=yr(),br.nt=!1;var xr="tag",Sr=18e5;function kr(t,n,e,r,i,o){var a={};a.c=t,a.k=n,a.v=e,a.t=r||+new Date,a.u=i||"",a.r=o||"",this.toJSON=function(){return ne.extend(!0,{},a)}}var Or={set:function(t,n,e){var r=void 0,i=[],o=br.get(xr)||[];if(!ne.isStr(n)||""===n)return!1;for(var a=0,u=o.length;a<u;a++)qr(r=o[a])||(t===r.c?n!==r.k&&i.push(r):i.push(r));return r=new kr(t,n,e,+new Date),i.push(r.toJSON()),br.set(xr,i),!0},get:function(t,n){var e=void 0,r=br.get(xr);if(r&&r.length)return e={},oe.each(r,function(t){var n={};n[t.k]=t.v,qr(t)||(e[t.c]=ne.extend(!0,e[t.c]||{},n))}),t&&n?e[t]&&e[t][n]:t?e[t]:e},getAll:function(){var t=br.get(xr),e={},r=void 0;return oe.each(t,function(t){var n=void 0;!qr(t)&&t.v&&(r=!0,(n={})[t.k]=t.v,e[t.c]=ne.extend(!0,e[t.c],n))}),r&&e},clear:function(n,e){if(!arguments.length)return br.set(xr,[]);if(ne.isStr(n)){var t=br.get(xr),r=[];oe.each(t,function(t){(e!==Vn&&t.k!==e||n!==t.c)&&r.push(t)}),br.set(xr,r)}}};function qr(t){var n=ne.now();return Sr<n-t.t}function jr(t){return t}function Ir(t){try{t(Mr(this,Dr),Mr(this,Ar))}catch(t){if(this._state===Er)return Fr(new Ir(jr),Ar,t)}}Ir.prototype.then=function(t,n){return function(t,n,e,r){Hn(e)===Cr&&(n._onFulfilled=e);Hn(r)===Cr&&(n._onRejected=r);t._state===Er?t[t._pCount++]=n:Nr(t,n);return n}(this,new Ir(jr),t,n)},Ir.all=function(l){return new Ir(function(r,e){for(var t,n,i,o=0,a=l.length,u=[],c=0,s=void 0,f=function(e){return function(t){if(e.value=t,e.state=Dr,++c===e.len&&!s){var n=function(t){var n=[];for(o=0;o<a;o++)n.push(t[o]?t[o].value:void 0);return n}(u);r(n)}}},d=function(n){return function(t){n.value=t,n.state=Ar,c++,s||(s=!0,e(t))}};o<a;o++)n=t=void 0,n=l[o],i={value:null,index:o,state:null,len:a},u.push(i),t=i,n.then?n.then(f(t),d(t)):Ir.resolve(n).then(f(t),d(t))})},Ir.resolve=function(n){if(n instanceof Ir)return n;if(ne.isFunc(n.then)){var e=n.then.bind(n);return new Ir(function(t,n){e(t,n)})}return new Ir(function(t){t(n)})},Ir.reject=function(e){return new Ir(function(t,n){n(e)})};var Ar=0,Dr=1,Er=2,Cr="function",Tr="object";function Mr(n,e){return function(t){return Fr(n,e,t)}}function Nr(e,r){return setTimeout(function(){var t=void 0,n=e._state?r._onFulfilled:r._onRejected;if(void 0!==n){try{t=n(e._value)}catch(t){return void Fr(r,Ar,t)}Rr(r,t)}else Fr(r,e._state,e._value)})}function Fr(t,n,e){if(t._state===Er){t._state=n,t._value=e;for(var r=0,i=t._pCount;r<i;)Nr(t,t[r++]);return t}}function Rr(n,t){if(t!==n||!t){var e=void 0,r=Hn(t);if(null===t||r!==Cr&&r!==Tr)Fr(n,Dr,t);else{try{e=t.then}catch(t){return void Fr(n,Ar,t)}Hn(e)===Cr?function(n,e,t){try{t.call(e,function(t){e&&(e=null,Rr(n,t))},function(t){e&&(e=null,Fr(n,Ar,t))})}catch(t){e&&(Fr(n,Ar,t),e=null)}}(n,t,e):Fr(n,Dr,t)}return n}Fr(n,Ar,new Error("promise_circular_chain"))}Ir.prototype._state=Er,Ir.prototype._pCount=0;var Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr=function(){var t=!("undefined"==typeof window||!window.navigator||!window.navigator.userAgent);function e(){return t?navigator.userAgent.toLowerCase():""}function r(t){for(var n={},e=t.replace(/\([^)]+\)/g,"").split(/\s+/),r="",i=0;i<e.length;i+=1){var o=e[i],a=o.lastIndexOf("/");if(a<0)r=o;else{var u=o.slice(0,a);r&&(u=r+" "+u,r=""),n[u]=o.slice(a-o.length+1)}}return n}function c(t){var n=t||"0",e=n.match(/^(\d*)/);return e?Number(e[1]):0}function o(t,n){for(var e="string"==typeof t?t.split("."):["0"],r="string"==typeof n?n.split("."):["0"],i=Math.max(e.length,r.length),o=0;o<i;o+=1){var a=c(e[o]),u=c(r[o]);if(u<a)return 1;if(a<u)return-1}return 0}function a(t){var n=-1,e=document.createElement("iframe");function r(){if(clearTimeout(n),e){var t=e.parentNode;t&&t.removeChild(e),e.onload=null,e.onerror=null,e=null}}e.style.display="none",e.onload=r,e.onerror=r,e.src=t,document.documentElement.appendChild(e),n=setTimeout(r,3e3)}function u(t){window.KNBTitansX&&window.KNBTitansX.sendMessage?window.KNBTitansX.sendMessage(t):window.prompt(t)}function s(t){window.prompt(t)}var n,i={getDefaultSender:function(){var i=Function.prototype,t=e();if(/ios|iphone|ipod|ipad/.test(t))i=a;else if(/android/.test(t)){var n=r(t);i=0<o(n.android,"4.2.0")?u:s}return function(t,n,e){var r="js://_?method="+t+"&callbackId="+e+"&args="+encodeURIComponent(n);i(r)}},compareVersion:o,parseUserAgent:r,canUseSlot:(n=r(e()),0<=o(n.titansx||n.titansnox,"11.13"))},f=i.getDefaultSender,d=i.compareVersion,l=i.parseUserAgent,v=i.canUseSlot,p="function"==typeof Symbol&&"symbol"===Pr(Symbol.iterator)?function(t){return void 0===t?"undefined":Pr(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":Pr(t)},h={sender:null};function m(t){return"DPApp_callback_"+t}function g(t,n){var e=m(t),r=window[e];r&&(r(n),r.isSafeDelete&&(window[e]=void 0))}function _(t){var n=t||"DPApp";if(!window[n]||!window[n].KNBCore){var e={dequeue:window[n]&&window[n].dequeue||Function.prototype,KNBCore:!0,callback:g};window[n]=function(t,n){if(t&&"object"===(void 0===t?"undefined":p(t))){var e=t;return Object.keys(n).forEach(function(t){e[t]=n[t]}),e}return n}(window[n],e)}}var y,b={bindSender:function(t){"function"==typeof t&&(h.sender=t)},sendMessage:function(t,n,e,r){var i=v&&r?"KNBSlot"+r:void 0;_(i);var o=function(t){if(!/^[a-zA-Z0-9]*$/.test(t))throw new Error("illegal slot name");var n=Math.floor(1e3*Math.random());return+(Date.now().toString().slice(-5)+""+n)+(t?"_"+t:"")}(i),a=m(o),u=e||{};window[a]=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.status,e="action"===n?"handle":n;"0"===String(e)&&(e="success"),"handle"!==e&&"success"!==e&&(e="fail");var r=u[e]||Function.prototype;if("function"==typeof r)return r(t)},u.handle||(window[a].isSafeDelete=!0),h.sender&&h.sender(t||"",JSON.stringify(n||{}),o)},fireCallback:g,compareVersion:d,parseUserAgent:l};return y=b,"undefined"!=typeof window&&(h.sender=f(),window.KNBCore||(window.KNBCore=y)),b}(),Br=!1,Vr=[],Ur=void 0,Jr=void 0;function Qr(t){Ze()?c===Be?t(Vn,Jr):Br?t(Ur,Jr):(Vr.push(t),Br?t(Vn,Jr):new Promise(function(t){t({ready:function(t){return t()},use:function(t,n){n=n||{},Lr.sendMessage(t,{data:n.data||{}},n,"LXAnalyticsSDK")}}),Br=!0}).then(function(t){var n,e,r=Jr=t;n=Ur,e=r,oe.each(Vr,function(t){t(n,e)}),Vr=[]})):t(e,Jr)}var Wr=500,Kr="getUserInfo";function Xr(){return new Ir(function(o,r){Qr(function(t,n){var e=Nn.DPApp,i=D(function(){o({})},Wr);n?n.ready(function(){n.use(Kr,{success:function(t){var n,e,r;f(i),o((e={},(r=(n=t)[k])&&"0"!==r||"dp"!==n.type?n[k]&&(e[k]=n[k]):e[k]=n[y],"dp"!==n.type&&n[y]&&(e[y]=n[y]),n.unionId&&(e.unionId=n.unionId),n.userId&&(e.userId=n.userId),e))},fail:function(t){f(i),r({code:I})}})}):e&&e[Kr]?e.ready(function(){e[Kr]({success:function(t){f(i);var n={};(t.dpid||t.userId)&&(n.dpid=t.dpid,n.userId=t.userId,n.unionId=t.unionId),o(n)},fail:function(t){f(i),r({code:a,res:t})}})}):r({code:a})})})}var $r,zr=($r=function(){for(var t=1*new Date,n=0;t===1*new Date&&n<200;)n++;return t.toString(16)+n.toString(16)},function(){var t=(screen.height*screen.width).toString(16);return $r()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t=Re,n=void 0,e=void 0,i=[],r=0;function o(t,n){var e=void 0,r=0;for(e=0;e<n.length;e++)r|=i[e]<<8*e;return t^r}for(n=0;n<t.length;n++)e=t.charCodeAt(n),i.unshift(255&e),4<=i.length&&(r=o(r,i),i=[]);return 0<i.length&&(r=o(r,i)),r.toString(16)}()+"-"+t+"-"+$r()});function Hr(){var t,n=se.get(mt)||zr();return(t=n)&&se.top(mt,t,lt),n}function Zr(){return Math.floor(1+65535*ne.rnd()).toString(16).substring(1)}function Gr(){var t=[],n=+new Date;return t.push(n.toString(16)),t.push(Zr()),t.push(Zr()),t.push(Zr()),t.join("-")}function Yr(t){var n=t.match(/(\d+)(?:\.(\d+)(?:\.(\d+))?)?/),e=[];if(n)for(var r=1;r<n.length;r++)e.push(parseInt(n[r]||0));return e}function ti(t,n){var e=Yr(t),r=Yr(n);return!(e[0]<r[0])&&(!(e[0]===r[0]&&e[1]<r[1])&&!(e[0]===r[0]&&e[1]===r[1]&&e[2]<r[2]))}var ni="getEnv",ei=N,ri=!1,ii=!1,oi=!1,ai=!1,ui=[],ci=0,si=void 0,fi=ne.now();function di(t){var n=(t._opts||{}).nativeOptions||{};return{cb:"_lx"+(100*ne.now()+ci++),mn:t._mn,cn:t._cn,data:t._d||{},options:n,ver:4}}function li(t,n,e,r,i){i=i||{};var o=this;o._cn=t,o._mn=n,o._d=e,o._cb=r,o._opts=i}function vi(t,n,e,r,i){if(F===ei||R===ei)return r(ei);var o=new li(t,n,e,Wt,i);if(M===ei)o.send(function(t,n){r(t,n)});else if(N===ei){if(ui.push([o,r]),!ri){ri=!0;new Date;new li(t,ni,{}).send(function(r,t){if(new Date,r&&T(r),r)ei=F;else{if(ei=M,xn(ot),ne.isStr(t))try{t=hr.parse(t)}catch(t){}var n=(si=t).sdk_ver||"";ii=ti(n,"4.0.0"),oi=ti(n,"4.3.0"),ai=!ti(n,"4.8.0")}oe.each(ui,function(t){var n=t[0],e=t[1];r?(T(r),e(r)):n.send(function(t,n){e(t,n)})})})}}else r(P)}function pi(){return ii}li.prototype.send=function(e){var r=this,i=di(r),t="statistics://_lx/?data="+Wn(hr.stringify(i)),n=ne.now();si&&5e3<n-fi&&r._mn===ni&&ei===M?(r._mn,e(0,si)):(r._mn,i.cb,function(i,o,a){if(Be!==c||!window.JavaScriptBridge)return Qr(function(t,n){if(t)return a(t);var e=!1,r=D(function(){e=!0,a(p)},5e3);n.use(i,{data:o,success:function(t){if(f(r),!e)if("success"===t.status){var n=t.data||{};try{ne.isStr(n)&&(n=hr.parse(n)),a(Vn,n.data?n.data:t)}catch(t){a(t)}}else a(E)},fail:function(){f(r),e||a(E)}})});window.JavaScriptBridge.log(o,function(t){var n=t.data;try{ne.isStr(n)&&(n=hr.parse(n)),a(Vn,n.data?n.data:n)}catch(t){a(t)}})}("lxlog",t,function(t,n){t?(r._mn,i.cb,new Date,T(t)):(r._mn,i.cb,new Date),e(t,n)}))};var hi,mi=!We&&Nn.indexedDB,gi=Nn.IDBFactory,_i=mi&&ne.isFunc(mi.open)&&mi.constructor===gi,yi=!1,bi=void 0,wi=void 0,xi=void 0,Si=60*(parseInt(rn.cacheRetryMinutes)||5),ki=!1,Oi=0;function qi(){return new Ir(function(n,e){if(!_i)return e();if(yi)return n();try{(bi=mi.open("_lxsdk_db",1e3)).onsuccess=function(t){yi=!0,wi=t.target.result,n()},bi.onupgradeneeded=function(t){wi=t.target.result,(xi=wi.createObjectStore("cache",{keyPath:"id",autoIncrement:!0})).createIndex("evs","evs",{unique:!1}),xi.createIndex("type","type",{unique:!1})}}catch(t){yi=!1,e()}})}function ji(){qi().then(function(){var e=wi.transaction(["cache"],"readwrite").objectStore("cache"),t=e.openCursor(),r=[];t.onsuccess=function(t){var n=t.target.result;n?(r.push(n.value),n.continue()):(Oi=r.length,r.forEach(function(t){!function(t){if("get"===t.type){var n=document.createElement("img"),e=Math.random();n.src="//wreport.meituan.net/?d="+pe("["+t.evs+"]")+"&t=1&r="+e+"&_lxsdk_rnd="+e,n.id=e,window["img_"+e]=n}else try{window.navigator.sendBeacon("//report.meituan.com",t)}catch(t){}}(t),e.delete(t.id)}))}})}qi();var Ii={add:function(t,e){qi().then(function(){var n=wi.transaction(["cache"],"readwrite").objectStore("cache");100<Oi&&n.clear(),t.forEach(function(t){t.evs.forEach(function(t){t.lx_inner_data=t.lx_inner_data||{},t.lx_inner_data.fc=1}),n.add({type:e,evs:JSON.stringify(t)})})})},size:function(){},remove:function(){},check:ji,startPoll:function(){!ki&&_i&&(ki=!0,hi=+new Date,qi().then(function(){setTimeout(function t(){var n="_lxsdk_rc_img",e=Nn[n]=new Image;e.onload=function(){ji(),ki=!1,Nn[n]=null},e.onabort=e.onerror=function(){+new Date-hi>1e3*Si||(setTimeout(t,6e3),Nn[n]=null)},e.src="//wreport.meituan.net/?r="+Math.random()},6e3)}))}},Ai=3,Di=150,Ei=5e3,Ci=3500,Ti=!1,Mi=[],Ni=[],Fi=0,Ri=0,Pi=!rn.use_post,Li=/Mozilla.+AppleWebKit.+Chrome.+Safari.+/i.test(Re)&&!Ve,Bi=!We&&ne.isFunc(Ln.sendBeacon);function Vi(t,n,e,r,i){var o=[{project:"web-lx-sdk",pageUrl:Fn.href,resourceUrl:t,category:i?"jsError":"ajaxError",sec_category:"prod_"+n,level:"error",unionId:e,timestamp:ne.now(),content:""+r||""}],a=Xi("//catfront.dianping.com/api/log?v=1",Bt,"application/x-www-form-urlencoded");a&&(a.onerror=a.onreadystatechange=function(){},a.send("c="+encodeURIComponent(hr.stringify(o))))}function Ui(t,n){if(Ai<=Ri)return!1;n=ne.extend({cb:zn},n||{});var e=pn();Pi=!rn.use_post;try{Pi?function(e,r){var t=Gn().toString(16)+Fi++,i=pn(),o=!1,a=!1,u=void 0,c=void 0,s=(n=e,f=[],d=[{l:Dt,s:Et},{l:xt,s:St},{l:kt,s:Ot},{l:qt,s:jt},{l:Ct,s:Tt},{l:It,s:At}],oe.each(n,function(t){var n=ne.extend(!0,{},t);oe.each(d,function(t){$i(n,t.l,t.s)});var e=[];oe.each(t.evs,function(r){r=ne.extend(!0,{},r),oe.each(r,function(t,n){if(-1<n.indexOf("val_")&&(r[n.replace("val_","")]=r[n],delete r[n]),$i(r,"refer_url","urlr"),r[n]&&"url"===n){var e=Fn.hash;e&&(r.urlh=e),delete r[n]}}),e.push(r)}),n.evs=e,n[Tt]===n.uuid&&delete n.uuid;var r=n[Ot];r&&(n[Ot]=r.replace("data_sdk_","")),delete n.ua,f.push(n)}),f);var n,f,d;if(oe.each(s,function(t){c=t.uuid||t.lxid,delete t.ua}),!function(t){for(var n=t.length,e=n,r=0;r<n;r++)127<t.charCodeAt(r)&&e++;return 1.5*e<xe}(u=hr.stringify(s)))return oe.each(e,function(t){oe.each(t.evs,function(t){var n=t.val_lab;t.val_lab=ne.extend(!0,{custom:{_s:1}},n||{})})}),Wi(i,e,{cb:function(t,n){try{r(t,n,"ajax-post")}catch(t){}t!==M&&(!o&&Bi&&(o=!0,Ji(i,e)),a||(a=!0,Vi(location.host+location.pathname,"ajax-post-"+t+"-"+n,c,u)))}});var l=pe(u),v=Wn(l),p=gn(!0);p+=-1<p.indexOf("?")?"&d="+v:"?d="+v,v.length,p=p+"&t=1&r="+t,Li?Wi(p,null,{method:"get",cb:function(t,n){try{r(t,n,"ajax-get")}catch(t){}t!==M&&(!o&&Bi&&(o=!0,Ji(i,e),Ii.add(s,"get"),Ii.startPoll()),a||(a=!0,Vi(location.host+location.pathname,"ajax-get-"+t+"-"+n,c,u)))}}):function t(n,e,r){var i=void 0,o=Pt+ke++;if(e=e||{},!(2<(r=r||0)))return Nn[o]=i=new Image,i.onload=function(){ne.isFunc(e.cb)&&e.cb(!0),Nn[o]=null},i.onabort=i.onerror=function(){Nn[o]=null,D(function(){t(n,e,++r)},100)},i.src=n,i;ne.isFunc(e.cb)&&e.cb(!1)}(p,{cb:function(t){if(t)try{r(M,200,"image-get")}catch(t){}else{try{r(Qt,0,"ajax-get-to-image-get")}catch(t){}!o&&Bi&&(o=!0,Ji(i,e),Ii.add(s,"get"),Ii.startPoll()),a||(a=!0,Vi(location.host+location.pathname,"image-get-500-0",c,u))}}})}(t,n.cb):Wi(e,t,n)||We&&Qi(e,t,n)||Ji(e,t)&&n.cb(M)}catch(t){return Vi(Fn.path,"report-ajax",0,t.message,!0),!1}return!0}function Ji(t,n){var e=Ln.sendBeacon;return!!e&&(oe.each(n,function(t){oe.each(t.evs,function(t){t.lx_inner_data=ne.extend(!0,{},t.lx_inner_data),t.lx_inner_data.beacon="1"})}),t=Ki(t),e&&e.call(Ln,t,hr.stringify(n)))}function Qi(t,n,e,r){if(!Nn.XDomainRequest)return!1;try{var i=new XDomainRequest;return i.open(Bt,Ki(t),!0),i.onload=function(){Ri=0,e&&e.cb(M,200,"IEXDR-post"),Mi=[]},i.onerror=function(){Ri++,e&&e.cb(F,0,"IEXDR-post")},i.ontimeout=function(){Ri++,r||(!function(t,n,e,r){Mi=Mi.concat(n);var i=void 0,o=oe.reduce(Mi,function(t,n){return n.evs=t.evs.concat(n.evs),i=n.evs.length,Di<i&&oe.slice(n.evs,i-Di,i),n});if(Mi=[o],Ni.push(r),!Ti)var a=setInterval(function(){if(Ai<=Ri)return clearInterval(a),!1;e(t,Mi,function(n){clearInterval(a),Ti=!1,oe.each(Ni,function(t){t&&t(n)})},!0)},Ci)}(t,n,Qi,e),Ti=!0)},i.timeout=Ei,i.send(hr.stringify(n)),!0}catch(t){return!1}}function Wi(n,e,r,i){if(!zt())return!1;try{var o=r&&r.method||Bt,a=ne.isFunc(r.cb)&&r.cb||Wt,u=Xi(n,o,"text/plain");return u.onreadystatechange=function(){if(4===u.readyState){var t=u.status;200<=t&&t<400?(Ri=0,a(M,u.status,"ajax-"+o),Mi=[]):i?a(P,u.status,"ajax-"+o):Wi(n,e,r,!0),u.onreadystatechange=null}},u.onerror=function(){a(F,u.status,"ajax-"+o)},u.send(o===Bt&&hr.stringify(e)||null),!0}catch(t){return Vi(n,"runtime",0,t.stack||t.message),!1}}function Ki(t){var n="_lxsdk_rnd="+(Gn().toString(16)+Fi);return-1===t.indexOf("?")?t+"?"+n:t+"&"+n}function Xi(t,n,e){var r=new(Kt());return r.open(n||Bt,Ki(t),!0),r.timeout=Ei,r.setRequestHeader("Content-Type",e),r}function $i(t,n,e){return $n.call(t,n)&&t[n]&&(t[e]=t[n],delete t[n]),t}var zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi={},Zi=ct,Gi=[],Yi=null,to={s:b,l:_,a:O,w:"wxid"},no="_lxsdk_wxenv_",eo=["sdk_ver","ua"];function ro(t){var n=/(^\w+-\w+-\w+-\w+-\w+)/;if(n.test(t)){var e=t.match(n);se.top(ht,e[1],lt)}else t&&!/(^\w+\.\d+\.\d+\.\d+\.\d+)/.test(t)&&t.length<100?se.top(ht,t,lt):se.top(ht,"",-1)}var io=0,oo=1,ao=2,uo="|";function co(t){var n=se.get(_t);return n?n.split(uo)[t]:""}function so(t,n,e){var r,i,o;se.top(_t,(r=n,i=e,(o=[]).push(t||fo()),o.push(r||lo()),o.push(i||vo()),o.join(uo)),vt)}function fo(){return co(io)}function lo(){return co(oo)}function vo(){var t=0,n=co(ao);return isNaN(n)||(t=parseInt(n)),t<0?0:t}var po,ho=void 0,mo=(po="_lxsdk_test",se.set(po,"1"),!(-1<Rn.cookie.indexOf(po)&&(se.del(po),1)));function go(){if(mo)return ho=ho||0,++ho;var t=vo();return t=t||0,so(Vn,Vn,++t),t}function _o(t,c){return new Ir(function(a,u){D(function(){u({code:p})},3e3),vi(t,"getEnv",{},function(t,n){if(t)u(t);else{Yi=rn.nativeSDKVer=n.sdk_ver,o=rn.nativeSDKVer,ne.isStr(o)&&(an.MVL=-1<Oe(o,"4.14.0"),an.QR=-1<Oe(o,"4.14.0"),an.getReqId=-1<Oe(o,"4.12.0"));var e={uuid:y,msid:b,uid:x,dpid:k,appnm:O,union_id:s};for(var r in c=c||{},e){var i=e[r];n[r]&&(c[i]=n[r])}a(c)}var o})})}function yo(){var t=se.get(yt);if(t){var n=t.split(","),e=/^\d+\.\d{5,}$/;return 3!==n.length?null:e.test(n[0])&&e.test(n[1])?{lat:n[0],lng:n[1],tm:n[2]}:null}return null}function bo(t){return ne.extend(!0,{},t)}function wo(t){var n=Rn.getElementsByTagName("meta"),e=he(n,"lx:appnm"),r=he(n,"lx:defaultAppnm"),i=Be,o=Rn.domain,a=wn();return dn("appnm",e),dn("defaultAppnm",r),Ve&&Ee(Be||e||r||o),Ue?e||(2===a?t:i||(r||o)):e||(i||(r||o))}function xo(){var t,n,e,r,i,o,a=Be===m||Be===h||Ye,u=(t=se.get(ht),n=se.get("iuuid")||se.get("uuid")||t,e=fo(),r=lo(),i=se.get(gt)||se.get(k),o={},n&&(o[y]=n),e&&(o[b]=e),t&&(o[_]=t),r&&(o[x]=r),i&&(o[k]=i),o),c=void 0,s={};a&&(s=function(t){var n={};if(j.test(t)){var e=ne.parseQuery(t);if(e[y]&&(n[y]=e[y]),e[w]&&(n[w]=e[w]),e[S]&&(n[x]=e[S]),e.__lxsdk_params){var i={},r=decodeURIComponent(decodeURIComponent(e.__lxsdk_params)).split(";");oe.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1];if(r){if(!to[e])try{r=Me(r)}catch(t){}i[e]=r}}),n[q]=i}return n}return n}(Fn.href)),Be===m&&(s[y]?(u[y]?s[y]!==u[y]?sn("uuidState","2"):sn("uuidState","3"):(u[y]=s[y],sn("uuidState","1")),delete s[y]):sn("uuidState","0")),(c=ne.extend(u,s)).ct=Qe;var f=sr();f&&(c[A]=f);var d=Hr();c[_]=d,c[y]||(c[y]=d),c[b]||(c[b]=Gr(),so(c[b],c.uid||"")),c[y]&&ro(c[y]);var l=wo();ne.isStr(l)&&(c[O]=l);var v,p=(v=Bn.replace(/^.*([A-Za-z-]+)\/com\.(sankuai(?!\.meituan\.)|meituan(?!\.sankuai\.)|dianping|sankuai\.meituan|meituan\.sankuai)\.([.A-Za-z0-9-]+)\/(\d+[.\d]+).*$/,"$4"),/^\d+(\.\d+)+$/.test(v)?v:null);return p&&(c.app=p),c}function So(n){return function(t){var e=t;return n!==t&&(e=ne.extend(n,t)),e.dpid&&e.uid?e:Xr().then(function(t){var n={};return t.dpid&&(n.dpid=t.dpid,t.userId&&(n.uid=""+t.userId),t.unionId&&(n.union_id=t.unionId)),e=ne.extend(e,n)},function(t){return T(t),e})}}var ko=function(t){en();var a=xo();if(t&&Be||Ze()){var n=_o(t,a);return r===Be&&(n=n.then(So(a),function(t){return T(t),So(a)()})),n.then(function(t){var n=wo(t[O]),e=t[k],r=t[y],i=t[s],o=t;return t!==a&&(o=ne.extend(a,t)),ne.isStr(n)&&(o[O]=n),r&&ro(r),e&&se.top(gt,e,lt),i&&se.top("_lxsdk_unoinid",i,lt),o},function(t){return t&&T(t),a})}var e,o=bo(a),u=o[q];return(e=ne.now(),new Ir(function(t){if(Ye)if(/miniProgram/i.test(Bn))t(!0);else if(Nn.WeixinJSBridge&&Nn.WeixinJSBridge.invoke)t("miniprogram"===Nn.__wxjs_environment);else{var n=setTimeout(function(){rn.wx_t=ne.now()-e,t(!1)},5e3);Rn.addEventListener("WeixinJSBridgeReady",function(){clearTimeout(n),rn.wx_t=ne.now()-e,t("miniprogram"===Nn.__wxjs_environment)})}else t(!1)})).then(function(t){if(rn.inWXMP=t){if("object"===(void 0===Te?"undefined":zi(Te))&&!ne.isObj(u))for(var n in u={},Te){var e=Te[n];0===n.indexOf(no)&&(u[n.slice(no.length)]=e)}var r=function(t){var n=to[t]||t,e=u[t];e&&(o[l]=o[l]||{},o[n]&&(o[l][n]=o[n]),oe.find(eo,function(t){return t===n})||(o[n]=e));try{Te.setItem(no+n,e||"")}catch(t){}};for(var i in u)r(i)}return delete o[q],Ir.resolve(o)})};function Oo(t){return ft===Zi?Ir.resolve(bo(Hi)):st===Zi?new Ir(function(n){var t;t=function(t){n(t)},Gi.push(t)}):(Zi=st,ko(t).then(function(e){return Hi=ne.extend(!0,{},e||{}),Zi=ft,oe.each(Gi,function(t,n){ne.isFunc(t)&&Gi[n](e)}),e}))}var qo=/([a-fA-F0-9-]+)(\.\d+)/,jo="_hc.v",Io=525600,Ao="",Do=/(dper|dianping|51ping)\.com/.test(Pn);function Eo(){return function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()+"."+Math.round(+new Date/1e3)}function Co(){return!Ao&&Do&&(Ao=function(){var t=se.get(jo);if(t||(t=Eo(),se.top(jo,t,Io)),t){var n=t.match(qo);return n?n[1]:""}return""}()),Ao}var To=function(){var t=void 0;try{var n=document;if(n.querySelectorAll){var e=n.querySelectorAll("head script"),r=n.querySelectorAll("body script"),i=[];oe.each(e,function(t){i.push(t)}),oe.each(r,function(t){i.push(t)});for(var o=0;o<i.length;o++){var a=i[o].innerHTML.match(/\[['"]\s*_setPageId\s*['"]\s*,\s*(\d+)\s*\]/);if(a){t=a[1];break}}}}catch(t){}return function(){return t}}();function Mo(t){var n=this;n.s=t;var e=void 0,r=br.get(Rt)||{s:t,d:n.d};r.s!==t?(br.del(Rt),e=n.d=[]):e=n.d=r.d||[],n.l=e&&e.length||0}var No=null;function Fo(){return No}function Ro(t){return Te&&ne.isFunc(Te.getItem)?Te.getItem(t):se.get(t)}function Po(t,n){return Te&&ne.isFunc(Te.setItem)?Te.setItem(t,n):se.top(t,n,vt)}function Lo(t){Po(wt,t)}function Bo(){var t=Ro(wt);return t||""}function Vo(t){Po(bt,t)}function Uo(){var t=Ro(bt);return t||""}var Jo="QR",Qo=20480/30,Wo=2592e5,Ko={},Xo=void 0,$o=!(Mo.prototype={constructor:Mo,set:function(t,n,e){var r=this,i=r.l,o=r.d,a=r.indexOf(t),u={scid:0<i?o[i-1].scid+1:0,cid:t,bid:n,sf:e};-1<a?o.splice(a,i-a,u):o.push(u),r.l=o.length,br.set(Rt,{s:r.s,d:o})},indexOf:function(t){for(var n=this.d||[],e=0,r=n.length;e<r;e++){if(n[e].cid===t)return e}return-1},toJSON:function(){var t=this.d;return t&&t.length?t:null}}),zo=[],Ho=!1,Zo=["ua"].join("|")+"|",Go=["lxcuid","category","sdk_ver","utm","uuid","msid","ct","appnm"],Yo=["utm","seq","tm","nm","val_ref","lng","val_lab","req_id","lat","s_from","val_cid","val_bid"];function ta(){if(!$o){var t=Gn(),n=[Xo.opts.cid],e=0,r=function(t,n){if(!t)try{var e=n;if(ne.isObj(n)||(e=JSON.parse(n)),0===e.code)(function t(n){var e=0,r=0;var i=[];var o=Gn()-Wo;for(var a in n)e+=n[a].bids.length,r+=n[a].bids.length;if(!r)return;for(var u in Ko)e+=Ko[u].bids.length,Ko[u].tm<o&&i.push(u);Qo<e&&(i.length?(oe.each(i,function(t){delete Ko[t]}),t(n)):Ko={});Ko=ne.extend(Ko,n);setTimeout(function(){br.set(Jo,Ko)},10)})(function(t){if(!ne.isObj(t))return;var i={},o=Gn();return oe.each(t,function(n,r){i[r]=i[r]||{cid:r,tm:o,bids:[],envInfo:(n.envInfo||{}).quickReport||[],evsInfo:(n.evsInfo||{}).quickReport||[]},delete n.envInfo,delete n.evsInfo;var t=function(e){var t=n[e].quickReport||[];oe.each(t,function(t){var n={tp:e,id:t};i[r].bids.push(n)})};for(var e in n)t(e)}),i}(e.data)),$o=!0;else{if(304!==e.code)return void e.message;$o=!0}}catch(t){}};for(var i in Ko)e++,t=Math.min(Ko[i].tm,t);0===e&&(t=0);var o=("https://ocean.sankuai.com/delivery/api/web-configFile?\n                timestamp="+t+"\n                &cidList="+n.join(",")+"\n                &rnd="+Math.random()).replace(/\s/g,"");"https"===Se()&&Wi(o,{},{cb:r})||function(t,n,e,r){var i=void 0,o=(r=r||{}).outTime||5e3,a="__lxsdk_jsonp_callback_"+Math.random().toString(16).slice(2,10);/^([^?]+)\?/.test(t)?t=t.replace(/^([^?]+)\?/,"$1?"+n+"="+a+"&"):/^([^#]+)#/.test(t)?t=t.replace(/^([^#]+)#/,"$1?"+n+"="+a+"#"):t+="?"+n+"="+a;var u=Rn.createElement("script");u.src=t,Nn[a]=function(t){clearTimeout(i);try{e(Vn,t)}catch(t){}delete window[a]},u.type="application/javascript",u.charset="utf-8",u.setAttribute("async","true"),Rn.body.appendChild(u),i=D(function(){try{e("timeout")}catch(t){}delete window[a]},o),D(function(){Rn.body.removeChild(u)},0)}(o,"callback",r)}}function na(t,n,e){if(!rn.useQR)return!1;if(!Ko[n])return!1;for(var r=Ko[n].bids,i=0,o=r.length;i<o;i++){var a=r[i];if(a.tp==t){if(t===L&&a.id==n)return!0;if(a.id==e)return!0}}return!1}function ea(t,n,e){var r={},i={};if(t&&Ko[t]){var o=Go.concat(Ko[t].envInfo||[]),a=Yo.concat(Ko[t].evsInfo||[]);oe.each(o,function(t){n.hasOwnProperty(t)&&n[t]&&(i[t]=n[t])}),oe.each(a,function(t){e.hasOwnProperty(t)&&Zo.indexOf(t+"|")<0&&(r["evs."+t]=e[t])});var u=ne.extend(!0,i,r);zo.push(u),f(Ho),Ho=setTimeout(function(){Wi("https://"+Jt+"/?rnd="+Math.random(),zo,{nm:e.nm,cb:Wt}),zo=[]},0)}}!function(){var t=br.get(Jo);if(t)try{var n=void 0;n=ne.isObj(t)?t:JSON.parse(t),Ko=ne.extend(!0,Ko,n)}catch(t){}}(),function n(){var e=du();return new Ir(function(t){e?t(e):setTimeout(function(){n().then(t)},100)})}().then(function(t){Xo=t,rn.useQR&&(Se(),ta())});var ra="category",ia="setEvs",oa=5e3,aa={overlen_cutoff:1},ua={code:200,status:200,type:"native-report"},ca={code:Qt,status:200,type:"native-report"},sa="val_bid",fa="page",da="s_from",la="lat",va="lng",pa=[],ha=Rn.referrer,ma=[],ga=void 0,_a=void 0,ya={},ba=0,wa=0,xa=function(t,n,e){if(e){var r={},i={custom:r};r[n]=e,t=ne.extend(!0,t||{},i)}return t},Sa=function(t,n){var e,r,i=(e=t,r="fn_"+parseInt(1e6*Yn()),Ne[r]=e,r);return D(function(){Fe(i,{code:-1,status:408,type:"overtime"})},te(n)&&n||2e3),i};function ka(t,n){var e=this;e.env=n||{},e.currentEvs={},e.opts=ne.extend(!0,{},t),pa.push(e),An=e}var Oa=ka.prototype;function qa(t){return 6===t._ptpvs}function ja(){return!ba}function Ia(t){return(t=t||{})&&!ne.isObj(t)&&(t={cid:""+t}),t}function Aa(e,r,i,o,a){var u=this,c=Sa((a=a||{}).callback,a.callbackTimeout),t=a,n=t.isLeave,s=t.currentPageInfo,f=t.mvDelay,d=t.sf,l=ne.isStr(a.category),v=na(e,r,i);if(wn()===at){var p=Fa(u),h=Ua(Or.getAll()),m=La(e,r,i,o,null,a),g=m.body,_=m.ev,y=Ja(p,g,h,a);if(v&&ea(r,p,_),e===J){if(f&&!l)return ne.run(g,function(t){t.lx_inner_data&&(t.lx_inner_data.md=f),ma.push(t)}),void D(function(){if(ma.length){var t=Ja(p,ma,h,a);u.send(t,{cbkey:c}),ma=[]}},f*it)}else{if(e===Q)return void Dn.call(u,Q,p,g[0],{tag:h});if(e===V){if(s&&function(t,n){ne.isObj(t[Mt])||(t[Mt]={});t[Mt][fa]=n}(_,u._cpi),y=Ja(p,g,h,a),n){var b=be(),w=Pa(B,r,Vn,b);y.evs.push(w),Lo(r),Vo(ga)}Ve&&d&&Fo().set(r,i,d)}}u.send(y,{nm:e,cbkey:c})}else{var x=u.env,S=void 0,k=Ra({isQuickReport:v}),O=[Va.call(u,e,r,i,o)];if(e===V&&(S={sf:d},u._cpi&&(S.cpi=u._cpi),O=[Va.call(u,e,r,i,o,null,S)],n)){var q=be(),j=Va.call(u,B,r,null,q);O.push(j),Lo(r),Vo(ga)}x[A]&&(O=function(t,n){if(!oe.isArray(t)||!t.length)return t;if(!ne.isObj(t[0][Mt]))return t[0][Mt]={page:{utm:n[A]}},t;if(!ne.isObj(t[0][Mt][fa]))return t[0][Mt][fa]={utm:n[A]},t;return t[0][Mt][fa]=ne.extend(!0,t[0][Mt][fa],{utm:n[A]}),t}(O,x));var I=ne.isStr(a.category)&&a.category||x[ra];new Date;vi(Na(I),ia,O,function(t,n){t?(xn(at),T(t),new Date,Fe(c,ca),Aa.call(u,e,r,i,o,a)):(Fe(c,ua),new Date)},{nativeOptions:k})}}function Da(){return ga||(ga=Ca()),ga}function Ea(t){var n=br.get(v);return n&&t&&br.del(v),n}function Ca(){return ne.now().toString(16)+"-"+Math.floor(65535*ne.rnd())+"-"+Math.floor(65535*ne.rnd())}function Ta(t){var n,e,r=t.nm;L===r?(t.nm="mpt",t.val_act="pageview"):B===r?(t.nm="report",t.val_act="quit"):(t.nm="mge",t.event_type=(n=r,(e={})[K]="order",e[X]="pay",e[V]="click",e[W]="return",e[J]="view",e[U]="click",e[n]||r)),t.nt=0,t.isauto=8}function Ma(t){var n="data_sdk_";return 0!==t.indexOf(n)&&(t=n+t),t}function Na(t){var n="data_sdk_";return 0===t.indexOf(n)&&(t=t.replace(n,"")),t}function Fa(t){var n=ne.extend(!0,{},t.env);n[ra]=Ma(n[ra]);var e=fo();e||so(e=Gr(),n.uid||""),rn.inWXMP&&ne.isObj(n[l])&&ne.isObj(t.env[l])?n[l][b]=t.env[l][b]=e:n[b]=t.env[b]=e;var r=n.utm,i={ua:Re,sdk_ver:g,ch:r&&r.utm_source?r.utm_source:"web",sc:ze};i[Dt]=g,rn.debug&&(i._misid=rn.debug);var o=ne.extend(!0,i,n);return Ue&&!yn()&&delete o.ch,o}function Ra(t){return(t=t||{}).isQuickReport=un("QR")&&!!t.isQuickReport,t}function Pa(t,n,e,r,i,o){i=i||C,o=o||{};var a,u,c,s=go(),f=yo(),d=ne.isObj(r)&&r.custom||{},l=void 0,v=L===t,p=K===t,h=X===t,m={nm:t,tm:ne.now(),nt:rn.inWXMP?ut:at,isauto:i,val_cid:n,req_id:Da(),seq:s,lx_inner_data:ne.extend(!0,{},fn())};if(v){var g=Fn.href;m.url=g,(l=ha)&&(m.refer_url=l),i===C&&(ha=g)}(p||v||h)&&Ve&&(a=m,(u=Fo().toJSON())&&(a[da]=u),m=a),r=xa(r,"_hguid",Co()),(c=r)&&c.custom&&"v3"===c.custom._api&&!n&&(m.val_cid=Rn.title||Fn.pathname,r=xa(r,"_cid",1)),ne.isObj(d)&&"v3"===d._api&&(m.lx_inner_data._api="v3",delete d._api),Ve&&o.sf&&(m.lx_inner_data.use_sfrom=1);try{m.lx_inner_data.ht=yn()}catch(t){}return v&&(r=xa(r,"_hpid",To()),rn.wx_t&&(r=xa(r,"_wx_t",rn.wx_t))),e&&(m[sa]=e),f&&(m[la]=f.lat,m[va]=f.lng),r&&(JSON.stringify(r).length>=oa&&(r=aa),(m[Mt]=r).lat&&r.lng&&(m[la]=r.lat,m[va]=r.lng)),m}function La(t,n,e,r,i,o){var a=Pa(t,n,e,r,i,o);return{body:function(t){{if(ma&&0<ma.length){var n=ma;return ma=[],n.push(t),n}return[t]}}(a),ev:a}}function Ba(t){return Je?t:Le&&!ai?t:Wn(t)}function Va(t,n,e,r,i,o){i=i||C;var a=(o=o||{}).fromWA,u=this.env.appnm,c=yo(),s=!Sn,f=void 0,d={nm:t,tm:ne.now(),nt:ot,isauto:i,val_cid:n,shouldCover:s,lx_inner_data:ne.extend(!0,{},fn())};d=ne.extend(!0,d,ya),_a&&(d.req_id=_a),o.sf&&(d.lx_inner_data.use_sfrom=1,d._sf=o.sf);var l=void 0,v=ne.extend(!0,{},r||{}),p=L===t;if(p){var h=Ba(Fn.href);l={ua:Re,url:h,_fromWA:!!a};var m=sr();m&&m.utm_source&&(l.utm=m),(f=ha)&&(l.refer_url=Ba(f)),i===C&&(ha=h)}else l={};return d=ne.extend(d,{web_cid:n,web_req_id:Da(),web_refer_cid:Bo(),web_refer_req_id:Uo(),web_first_pv:!!(wa<=1&&Nn.history&&1===Nn.history.length)}),oe.each({web_req_id:Da(),web_sdk_ver:g,lxcuid:Hr(),web_appnm:u},function(t,n){ne.isStr(t)&&(l[n]=t)}),ne.isObj(v.custom)&&"v3"===v.custom._api&&(l.web_appnm=function(t){if(ne.isStr(t))return t&&nn[t]||nn}("appnm"),d.lx_inner_data._api="v3",delete v.custom._api),o.cpi&&!v.page&&(v.page=o.cpi),v.custom=ne.extend(!0,v.custom,l),v=xa(v,"_hguid",Co()),p&&(v=xa(v,"_hpid",To())),t!==U||oi?pi()||Ta(d):pi()?d.nm=V:Ta(d),c&&(d[la]=c.lat,d[va]=c.lng),e&&(d[sa]=e),v&&JSON.stringify(v).length>=oa&&(v=aa),d[Mt]=v,p&&!pi()&&(d.val_val=v,delete d[Mt]),d}function Ua(t){return t}function Ja(t,n,e,r){var i=(r=r||{}).category;return oe.isArrayLike(n)||(n=[n]),ne.run(n,function(t){t&&e&&(t.tag=e)}),t.evs=n,ne.isStr(i)&&(t[ra]=Ma(i)),t}function Qa(t,n){var e={};return e[rt]=n,ne.extend(e,t)}function Wa(e,t,n,r){var i,o,a,u,c=(i=t,o=n,a=r,u=null,!ne.isStr(i)||o||a?ne.isObj(i)&&ne.isStr(o)&&!a&&(u=o,o=null):(u=i,i=null),u&&(a=ne.extend({cid:u},a||{})),{lab:i,env:o,opts:a}),s=c.lab,f=c.env;r=Ia(c.opts);var d=e.opts.cid=r.cid||e.opts.cid;r=ne.extend({cid:d},r),f&&ne.isObj(f)&&oe.each(f,function(t,n){e._dt.set(n,t,Vn,!0)}),e._dt.pageView(s,r)}function Ka(t,n){this.env=t||{},this.opts=n||{},this._t=[]}Oa.set=function(t,n,e,r){var i=this,o=i.env;if(ne.isObj(t))ue(t,function(t,n){i.set(n,t)});else if(!r&&rn.inWXMP&&ne.isObj(o[l])&&o[l][t]?o[l][t]=n:o[t]=n,dn(t,n),O===t&&Ee(n),"utm"===t&&ne.isObj(n)&&cr(n),ot!==wn()||Lt[t])ne.isFunc(e)&&e(o,i);else{var a={},u=Na(o[ra]);a[t]=n,vi(u,"setEnv",a,function(){ne.isFunc(e)&&e(o,i)})}},Oa.get=function(t,n){ne.isFunc(n)&&n(this.env[t],this)},Oa.pageView=function(e,r){r=Ia(r)||{};var t=void 0,i=this,n=r.fromWA,o=r.withlab,a=Sa(r.callback,r.callbackTimeout),u=i.opts.cid,c=r.cid||u,s=r.isauto||C,f=r.isAutoInit,d=r.reportStatus,l=u&&!(qa(i)||f)&&!ja(),v=d===at||at===wn(),p=i.env;if(n&&o?(s=6,e=this._cpi||{}):this._cpi=e,l&&!vn()){var h=be();t=v?Pa(B,u,null,h):Va.call(i,B,u,null,h),Lo(c),Vo(ga)}ln(0),u&&(qa(i)||ja())||(ga=Ca()),i.opts.cid=c;var m=na(L,c);if(v){var g=Fa(i),_=Ua(Or.getAll()),y=La(L,c,null,e,s),b=y.body;l&&t&&b.unshift(t);var w=Ja(g,b,_,r);m&&ea(c,g,y.ev),this.send(w,{nm:L,cbkey:a}),wa++,f||ba++}else{var x=Ra({isQuickReport:m,shouldCoverCid:!0,needCachePD:!0}),S=[Va.call(i,L,c,null,e,s,{fromWA:n})];l&&t&&S.push(t),vi(Na(ne.isStr(r.category)&&r.category||p[ra]),ia,S,function(t,n){t?(xn(at),Fe(a,ca),i.pageView(e,r),Vi(Fn.href,"native-report-error",i.env.union_id,T(t))):(wa++,f||ba++,Fe(a,ua))},{nativeOptions:x})}i.currentEvs={cid:c,req_id:Da(),refer_cid:Bo(),refer_req_id:Uo()},i._ptpvs=f?6:C,ye()},Oa.pageDisappear=function(e,r){r=ne.extend({},r);var i=this,t=r.cid||i.opts.cid,n=r.shouldStore;ln(d);var o=be();if(e=ne.extend(o,e),Lo(t),Vo(ga),at===wn()||n){var a=Ja(Fa(i),Pa(B,t,null,e,r.isAuto),Ua(Or.getAll()),r);if(Ve&&n&&br.nt){De()&&(rn.inWXMP&&ne.isObj(a[l])&&a[l][O]?a[l][O]=Ce():a[O]=Ce());var u=Ea()||[];oe.isArray(u)?br.set(v,u.concat(a)):br.set(v,[a])}else i.send(a)}else{var c=this.env,s=Ra(),f=[Va.call(i,B,t,null,e)];vi(Na(ne.isStr(r.category)&&r.category||c[ra]),ia,f,function(t,n){t&&(xn(at),i.pageDisappear(e,r))},{nativeOptions:s})}Tn()},Oa.systemCheck=function(e,r,i){i=ne.extend({},i);var o=this,t=i.cid||o.opts.cid,n=!!i.isLXLog;if(at===wn()){var a=Fa(o),u=Ja(a,La(U,t,e,r).body,Ua(Or.getAll()),i);n&&(a.category="others"),this.send(u)}else{var c=o.env,s=Ra(),f=[Va.call(o,U,t,e,r)],d=ne.isStr(i.category)&&i.category||c[ra];n&&(d="others"),vi(Na(d),ia,f,function(t,n){t&&(xn(at),o.systemCheck(e,r,i))},{nativeOptions:s})}},Oa.moduleView=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay,Aa.call(this,J,r,t,n,e)},Oa.moduleViewList=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay;var i=un("MVL");wn()!==ot||i?Aa.call(this,Q,r,t,n,e):Aa.call(this,J,r,t,n,e)},Oa.moduleClick=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;e&&e.isLeave&&ln(d),e.currentPageInfo=e.withPageInfo&&ne.isObj(this._cpi)?this._cpi:Vn,Aa.call(this,V,r,t,n,e)},Oa.moduleEdit=function(t,n,e){var r=(e=ne.extend({},e)).cid||this.opts.cid;Aa.call(this,W,r,t,n,e)},Oa.order=function(e,r,i){i=ne.extend({},i);var o=this,a=Sa(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;we(0,r);var n=na(K,t,e);if(at===wn()){var u=Fa(this),c=La(K,t,e,r),s=c.body,f=Ua(Or.getAll()),d=Ja(u,s,f,i);n&&ea(t,u,c.ev),this.send(d,{cbkey:a})}else{var l=this.env,v=Ra({isQuickReport:n}),p=[Va.call(o,K,t,e,r)];vi(Na(ne.isStr(i.category)&&i.category||l[ra]),ia,p,function(t,n){t?(xn(at),Fe(a,ca),o.order(e,r,i)):Fe(a,ua)},{nativeOptions:v})}},Oa.pay=function(e,r,i){i=ne.extend({},i);var o=this,a=Sa(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;we(0,r);var n=na(X,t,e);if(at===wn()){var u=Fa(o),c=La(X,t,e,r),s=c.body,f=Ua(Or.getAll()),d=Ja(u,s,f,i);n&&ea(t,u,c.ev),this.send(d,{cb:function(t,n,e){Or.clear(),Fe(a,{code:t,status:n,type:e})}}),o.clearTag()}else{var l=this.env,v=Ra({isQuickReport:n}),p=[Va.call(o,X,t,e,r)];vi(Na(ne.isStr(i.category)&&i.category||l[ra]),ia,p,function(t,n){t?(xn(at),Fe(a,ca),o.pay(e,r,i)):Fe(a,ua)},{nativeOptions:v})}},Oa.tag=function(e,t,n,i){var r=void 0,o=this.env,a=arguments,u=[],c=function(t){if(!ne.isObj(t))return t;for(var n=t,e=0,r=u.length;e<r;e++){if(!n)return n;n=n[u[e]]}return n},s=function(){oe.each(a,function(t){if(!ne.isStr(t))return!1;u.push(t)})},f=function(t,n,e){var r={};r[t]=n,vi(Na(o[ra]),"setTag",r,function(t,n){i&&(e&&s(),i(t,c(n),!0))})},d=function(t){var n=Or.getAll();t||s(),i&&i(0,c(n),!1)};if(oe.each(a,function(t){ne.isFunc(t)&&(i=t)}),ne.isObj(e)){var l=this;oe.each(e,function(t,n){l.tag(n,t)})}else ne.isStr(e)&&ne.isObj(t)?at!==wn()?f(e,r=t,!0):(ue(t,function(t,n){Or.set(e,n,t)}),d(!0)):(ne.isObj(n)||ne.isStr(n))&&function(t){if(!ne.isStr(t)&&!t.length)return!1;return!0}(e)&&ne.isStr(t)?at!==wn()?((r={})[t]=n,f(e,r,!0)):(Or.set(e,t,n),d(!0)):ne.isFunc(e)||ne.isFunc(t)||ne.isStr(e)&&ne.isStr(t)&&ne.isFunc(n)?at!==wn()?(s(),vi(Na(o[ra]),"getTag",{},function(t,n){i&&i(t,c(n),!0)})):d():i&&i(-1)},Oa.clearTag=function(t,n,e){var r=0;at===wn()?(ne.isFunc(t)&&(e=t,t=Vn),Or.clear(t,n),e&&e(0)):r=-1,e&&e(r)},Oa.sfrom=function(r){var i=void 0,t=this.env;at!==wn()?vi(Na(t[ra]),"getSFrom",{},function(t,n){if(n){var e=n.data?n.data:n;i=ne.isStr(e)?JSON.parse(e):e,r(t,i)}}):r(1,[])},Oa.send=function(t,r){var n=[];r=ne.extend({cb:function(t,n,e){r.cbkey&&Fe(r.cbkey,{code:t,status:n,type:e})}},r),ne.run(t,function(t){De()&&(rn.inWXMP&&ne.isObj(t[l])&&t[l][O]?t[l][O]=Ce():t[O]=Ce()),n.push(t)});var e=Ea(!0);e&&oe.isArray(e)&&(n=e.concat(n)),Ui(n,r)},Oa.getAll=function(){return pa};var Xa=Ka.prototype;Xa.create=function(t,n){var e=ne.extend({},this.env);e=ne.extend(e,{category:t});var r=ne.extend({isDefault:!1},this.opts),i=new ka(r=ne.extend(r,n||{}),e);return this._t.push(i),n.isDefault&&(this._dt=i),i},Xa.config=function(t,n){return Vn!==t&&(rn[t]=n),"cid"===t&&ie(n)&&(this.opts.cid=n),rn[t]},Xa._initPV=function(t,n){Wa(this,this.config("pageValLab"),t=ne.extend(t,this.config("pageEnv")),{isauto:6,cid:n,isAutoInit:!0})},Xa.pageView=function(t,n,e){Wa(this,t,n,e)},Xa.moduleView=function(t,n,e){this._dt.moduleView(t,n,e)},Xa.moduleViewList=function(t,n,e){this._dt.moduleViewList(t,n,e)},Xa.systemCheck=function(t,n,e){this._dt.systemCheck(t,n,e)},Xa.moduleClick=function(t,n,e){this._dt.moduleClick(t,n,e)},Xa.moduleEdit=function(t,n,e){this._dt.moduleEdit(t,n,e)},Xa.order=function(t,n,e,r){this._dt.order(t,Qa(e,n),r)},Xa.pay=function(t,n,e,r){this._dt.pay(t,Qa(e,n),r)},Xa.pageDisappear=function(t,n){this._dt.pageDisappear(t,n)},Xa.tag=function(t,n,e,r){this._dt.tag(t,n,e,r)},Xa.sfrom=function(t){this._dt.sfrom(t)},Xa.clearTag=function(t,n,e){this._dt.clearTag(t,n,e)},Xa.getAll=function(t){t&&t(this._t)},Xa.getTracker=function(n,t){var e=oe.find(this._t,function(t){return t.env.category===n});t&&t(e)},Xa.get=function(t,n){this._dt.get(t,n)},Xa.set=function(t,n,e){this._dt.set(t,n,e)},Xa._setRequestID=function(t){_a=t},Xa._setNativeEvsData=function(t,n){var e;e=n,ya[t]=e};var $a=void 0,za=!0,Ha=function(){var t;if(!!!rn.onWebviewAppearAutoPV)return t=rn.c,void du().getTracker(t,function(t){var n=t.env.category,e=ne.extend({refer_cid:Bo(),refer_req_id:Uo()},t.currentEvs);oe.each(e,function(t,n){e["web_"+n]=t,delete e[n]}),vi(n,"setWebPageData",e,function(t,n){})});ye(),lu(),$a.pageView(Vn,Vn,{fromWA:!0,withlab:!!rn.positiveLab}),ln(0)},Za=function(){!!rn.onWebviewAppearAutoPV&&(vn()||(ln(d),$a.pageDisappear({})))},Ga=function(){za=!0,Ha()},Ya=function(){za=!1,Za(),Tn()},tu=function(){za&&Ha()},nu=function(){za&&(Za(),Tn())},eu=void 0,ru=!!/\d\.\d\.\d/.test(Ge)&&0<=Oe(Ge,"11.3.0");function iu(t,n){ne.isStr(t)&&(n=ne.isFunc(n)&&n||function(){},"on"+t in Nn||"KNB:"+t in Nn?ne.on(window,t,function(t){n(t)}):(eu=window.KNB)&&ne.isFunc(eu.subscribe)&&eu.subscribe({action:t,handle:function(){n()},success:function(){},fail:function(t){}}))}var ou={hook:function(){try{iu("appear",Ga),iu("disappear",Ya),ru&&(iu("foreground",tu),iu("background",nu))}catch(t){Vi("sdk","api-error","",t.stack,!0)}$a=du()}},au=[],uu=ct,cu=void 0,su=void 0;function fu(t,n){return{cb:t,cmd:n}}function du(){return cu}function lu(){var n,r;kn(!1),(n=su,r={none:!0},new Ir(function(e){try{var t=Oe(Yi,"4.12.0");!Yi||!te(t)||t<0?e(r):n&&Be||Ze()?vi(n,"getReqId",{},function(t,n){e(t?r:n)}):e(r)}catch(t){e(r),Vi("sdk","api-error","",t.stack,!0)}})).then(function(t){var n=t||{},e=n.val_ref,r=n.req_id,i=n.refer_req_id,o=!!(r||e||i);r&&cu._setRequestID(r),e&&cu._setNativeEvsData("val_ref",e),i&&cu._setNativeEvsData("refer_req_id",i),kn(o)})}function vu(t,n){if(ft===uu)t&&t(cu);else if(st===uu)t&&au.push(fu(t,n));else{ne.now();au=au.concat(fu(t,n));var e=Rn.getElementsByTagName("meta"),o=he(e,"lx:cid")||rn.cid;if(!(su=rn.c=he(e,"lx:category")))return void(uu=ct);uu=st;var a=he(e,"lx:mvDelay");a=isNaN(a)?0:parseInt(a,10);var u="off"!==he(e,"lx:autopv");rn.autoPV=u,D(lu,1e3),Ir.all([Oo(su)]).then(function(t){var n,r=t[0],e=r.appnm;!ne.isStr(e)||Rn.domain,cu=new Ka(r,{cid:o,isDefault:!0,mvDelay:a}),su&&cu.create(su,{isDefault:!0}),r=ne.extend(!0,cu._dt.env,r),cu._dt.env=r,ne.now();try{var i=[];oe.each(au,function(t){var n=t.cb,e=t.cmd;"config"===e||"set"===e?n(cu,r):i.push(t)}),Ve&&(n=r.msid,No||(No=new Mo(n))),u&&su&&o&&o&&cu._initPV(r,o),ou.hook(function(){}),oe.each(i,function(t){t&&t.cb&&t.cb(cu,r)})}catch(t){}}).then(function(){uu=ft,Ii.check()},function(t){throw uu=ft,t})}}var pu=[["click",nt],["tap",nt],["view","moduleView"],["return","moduleEdit"],["order",et],["pay","pay"]],hu=oe.reduce(pu,function(t,n){return t[n[0]]=n[1],t},{}),mu=[["mpt",Y],["report","pageDisappear"]],gu=oe.reduce(mu,function(t,n){return t[n[0]]=n[1],t},{}),_u=oe.reduce(["config","event","send","use"],function(t,n){return t[n]=!0,t},{}),yu=function(t,n){var e=Rn.getElementsByTagName("head")[0],r=Rn.createElement("meta");r.setAttribute("name",t),r.setAttribute("content",n),e.appendChild(r)},bu=function(e,t){return e=e||{},ue(t,function(t,n){1==={act:1,cid:1,val:1,lab:1,bid:1}[n]?e["val_"+n]=t:e[n]=t}),e},wu=function(t,n,e){(t&&!re(t)&&(t={custom:{_lab:t}}),!t&&e&&(t={}),e)&&((t.custom=t.custom||{})[n]=e);return t},xu=function(t,n,e){return t&&!re(t)&&(t={custom:{_lab:t}}),t&&(t[n]=e),t},Su=function(t,n){var e=t[Mt],r=t[Ft];if(e&&e===r&&(r=ee(!0,{},r)),n&&(r||e)){var i=e;e=r||{},i&&(e=wu(e||{},"_lab",i))}else if(!n&&(r||e)){if(ie(r)&&(r={analyse_val:r}),ie(e))e={val_lab:e};r&&(e=xu(e||{},"page",r))}return Vn!==t[z]&&(e=wu(e||{},"_act",t[z])),Vn!==t[$]&&(e=wu(e||{},"_et",t[$])),Vn!==t[Z]&&(e=xu(e||{},Z,t[Z])),Vn!==t[G]&&(e=wu(e||{},"_el_id",t[G])),e};function ku(t){var n,e,r,i=(e=(n=t).split("."),r=void 0,2===e.length&&(n=e[1],r=e[0]),[n,r]),o=void 0;return i[1]&&(o=i[1]),[t=i[0],o]}var Ou=function n(e,t){var r=ku(e);e=r[0];var i=r[1],o=t[0],a=t[1];if(oe.isArray(o))return ce(o,function(t){return n(i?i+"."+e:e,[t,a])});var u,c,s=(o.nm||"mge").toLowerCase();o.nm=s,(c=(u=o).val)&&(bu(u,c),delete u.val),o=u;var f="mge"===s;if("mpt"===s)return function(t){t=bu(t,t.val);var n=Su(t,!0);return[Y,n,null,t[H]]}.apply(null,t);var d,l,v=et===s,p="pay"===s,h=o[$],m=o[z],g=Su(o,!1);v||p||h||!f||!m?p||v?e=s:(l=h,e="mge"===(d=s)?l?hu[l]||tt:nt:"mpt"===d||"report"===d?gu[d]:tt,f||(g=wu(g||{},"_nm",s))):e=nt;var _=o[H];return _&&((a=a||{}).cid=_),i&&wu(g,"_logchannel",i),wu(g=g||{},"_api","v3"),e===et||"pay"===e?[e,o[Nt],g.order_id,g,a]:[e,o[Nt],g,a]},qu=function t(){if(!t.f){yu("lx:autopv","off"),t.f=!0}},ju=function(t){if(!t||!t.length)return t;try{var n=t[0];0<(a=(o=n).indexOf("."))&&(o=o.substr(a+1)),_u[o]&&(t=oe.slice(t,1),Iu(n)?(Ae(3),qu(),t=Ou(n,t)):Au(n)?(Ae(3),qu(),t=function(t,n){var e=ku(t)[1];t=Y;var r=n[1],i=n[2],o=e?{custom:{_logchannel:e}}:Vn,a={};if(ie(r))re(i)?o=i:ie(i)&&(o=wu({},"analyse_val",i));else if(re(r)){i=(a=bu(a,r))[Ft],ie(i)&&(i=wu({},"analyse_val",i)),o=i;var u=a[Mt];u&&wu(o,"_lab",u),r=a[H]}var c=void 0;return r&&((c={}).cid=r),[t,o=wu(o,"_api","v3"),Vn,c]}(n,t)):Du(n)?(Ae(3),qu(),t=function(t,n){var e=n[0],r=n[1];if(e&&(e=e.replace(/^data_sdk_/i,""),yu("lx:category",e)),re(r))return["set",r]}(0,t)):Eu(n,t[0],t[1])?(qu(),e=n,r=t[0],i=t[1],t="appnm"===r&&ie(i)?void yu("lx:appnm",i):("cid"===r&&ie(i)&&yu("lx:cid",i),[e,r,i])):t.unshift(n))}catch(t){}var e,r,i,o,a;return t},Iu=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"event"===t},Au=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"send"===t},Du=function(t){return"use"===t},Eu=function(t,n){var e=!1;return"cid"!==n&&"appnm"!==n||(Ae(3),e=!0),"config"===t&&e},Cu=void 0,Tu=void 0;function Mu(t,n,e,r,i){if(ne.isFunc(n))n.call(t,t,r,i);else if(!i&&ne.isStr(n)){if(ne.isFunc(t[n]))return t[n].apply(t,e);if("onLoad"===n)try{e[0](ne.extend(!0,{},r))}catch(t){}}}function Nu(){if(!Tu){Tu=!0;var r=void 0;We&&ne.on(Rn,"mouseup",function(t){var n=t.target||t.srcElement,e=n.tagName+n.href;e=e.toLocaleLowerCase(),1===n.nodeType&&/^ajavascript:/i.test(e)&&(r=new Date)});var t=Nn.onbeforeunload;Ve&&Je?Nn.addEventListener("pagehide",qe(!1,We,r,void 0,Fu,Vn,vn)):Nn.onbeforeunload=qe(!1,We,r,void 0,Fu,t,vn)}}function Fu(r){try{var t=document.getElementById("__lxsdk_devltool_message_node");if(t){var n=new CustomEvent("lxsdk",{detail:{args:JSON.stringify(arguments)}});t.dispatchEvent(n)}}catch(t){}var e=arguments;if(e.length){var i=oe.slice(e,1,e.length);try{Cu?Mu(Cu,r,i,Cu._dt?Cu._dt.env:null):vu(function(t,n,e){Mu(Cu=t,r,i,n,e),Nu()},r)}catch(t){try{Vi("sdk","api-error","",t.message+"\n"+t.stack,!0)}catch(t){}}}}window._lxsdk_isDOMReady||(window._lxsdk_isDOMReady=!0,function(){var s=!0,f=!1,d=function(){var t=me();t&&(t.q.push=function n(t){try{var e,r=(e=ju(t))?e[0]:"";if(oe.isArray(r))return void ue(e,function(t){n(t)});"start"===r?(s=!0,f||l(d)):!1===s?e&&d.push(e):Fu.apply(Vn,e)}catch(t){try{Vi("sdk","api-error","",t.stack,!0)}catch(t){}}});for(var n=void 0,e=void 0,r=[],i=[],o=[],a=t&&oe.isArray(t.q)?t.q:[],u=0,c=a.length;u<c;u++)"config"===(e=a[u][0])?i.push(a[u]):n||"use"!==e?o.push(a[u]):(r.push(a[u]),n=!0);return a=i.concat(r.concat(o))}();function l(t){f||(t&&oe.each(t,function(t){var n,e=(n=ju(t))?n[0]:"";oe.isArray(e)?ue(n,function(t){Fu.apply(Vn,t)}):e?Fu.apply(Vn,n):t&&t&&t[0]}),Fu(function(){Nu()}),f=!0)}if(0===d.length)vu(function(t){Cu=t,Nu()});else try{d=ce(d,function(t){var n;if("config"===((n=ju(t))?n[0]:"")){var e=n[1],r=n[2];"autoStart"===e&&!1===r&&(s=!1)}return n}),s&&l(d)}catch(t){}}())}();
